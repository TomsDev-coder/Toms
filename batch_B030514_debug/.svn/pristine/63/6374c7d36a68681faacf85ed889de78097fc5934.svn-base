<?xml version="1.0" encoding="UTF-8"?>
<configuration status="OFF">
	<Properties>
		<Property name="app_name">demo</Property>
		<Property name="date">%d{yyyy-MM-dd HH:mm:ss.SSS}</Property>
		<Property name="daily_log">logs/app_${app_name}_%d{yyyy-MM-dd}.log
		</Property>
		<Property name="monthly_log">logs/app_monthly_${app_name}_%d{yyyy-MM}.log
		</Property>
		<Property name="error_daily_log">logs/app_error_${app_name}_%d{yyyy-MM-dd}.log
		</Property>
	</Properties>
	<appenders>
		<Console name="Console" target="SYSTEM_OUT">
			<PatternLayout
				pattern="${date}, [${app_name}], [ %-5level ], %logger{10}, %msg %n" />
		</Console>
		<RollingFile name="File" fileName="logs/app.log"
			filePattern="${daily_log}.gz">
			<PatternLayout
				pattern="${date}, [${app_name}], [ %-5level ], %logger{10}, %msg %n" />
			<Policies>
				<TimeBasedTriggeringPolicy />
			</Policies>
		</RollingFile>
		<RollingFile name="ErrorFile"
			fileName="logs/app_error.log" filePattern="${error_daily_log}.gz">
			<RegexFilter regex="\[ ERROR \]" />
			<PatternLayout
				pattern="${date}, [${app_name}], [ %-5level ], %logger{10}, %msg %n" />
			<Policies>
				<TimeBasedTriggeringPolicy />
			</Policies>
		</RollingFile>
		<RollingFile name="MonthlyFile"
			fileName="logs/app_monthly.log" filePattern="${monthly_log}.gz">
			<PatternLayout
				pattern="${date}, [${app_name}], [ %-5level ], %logger{10}, %msg %n" />
			<Policies>
				<TimeBasedTriggeringPolicy />
			</Policies>
		</RollingFile>
		<JDBC name="BatchStatus" tableName="t_batch_status">
		     <DriverManager connectionString="jdbc:postgresql://10.208.77.60:5432/tomssdx01?useSSL=false" 
        driverClassName="org.postgresql.Driver"
        username="postgres" 
        password="postgres" />
<!-- 			<ConnectionFactory
				class="jp.co.seiko_sol.common.ConnectionFactory"
				method="getConnection" /> -->
			<Column name="batch_id" pattern="%X{batch_id}"
				isUnicode="false" />
			<Column name="mission_key" pattern="%X{mission_key}"
				isUnicode="false" />
			<Column name="process_status" pattern="%X{process_status}"
				isUnicode="false" />
			<Column name="processed_at" isEventTimestamp="true" />
			<Column name="process_status_details" pattern="%message"
				isUnicode="false" />
			<Column name="created_at" isEventTimestamp="true" />
			<Column name="created_by" pattern="%X{created_by}"
				isUnicode="false" />
		</JDBC>
	</appenders>
	<loggers>
		<logger name="BatchStatus.log" level="info">
			<appender-ref ref="BatchStatus" />
		</logger>
		<root level="info">
			<appender-ref ref="Console" />
			<appender-ref ref="File" />
			<appender-ref ref="MonthlyFile" />
			<appender-ref ref="ErrorFile" />
		</root>
	</loggers>
</configuration>